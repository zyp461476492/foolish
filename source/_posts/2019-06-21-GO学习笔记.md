---
title: GO学习笔记
date: 2019-06-21 16:21:40
tags: 
    - go
    - 学习笔记
categories: 学习笔记
---
> Go 语言学习笔记，内容来源于官方文档，翻译质量较差会逐步改进。

<!-- more -->

## 概述

- Go 的开发人员通常保存所有的单位在一个工作空间。
- 一个工作空间包含多个存在版本控制的仓库（例如被 git 管理的仓库）。
- 每一个仓库有一个或者多个包。
- 每一个包都是一个目录，目录中包含一个或者多个 Go 源文件。
- 包的路径直接决定了它的引入路径。

## Workspaces

工作空间是一个包含下列两个目录的层次结构：

1. src 包含了 Go 的源代码
2. bin 包含了可执行文件

## GOPATH 环境变量

GOPATH 指定了你的工作空间所在的位置。默认是一个叫做 go 的文件夹，在 UNIX 下的路径为 $HOME/go， 在 Plan 9 的路径为 $Home/go, Windows下通常是 %USERPROFILE%\go。

如果你要自定义你的工作空间，可以通过设置 GOPATH 环境变量来完成。

## import paths

import paths 是用于唯一标识包的字符串。一个包的 import path 和它在本地工作空间和远程仓库中的位置相关。

标准库中的 import path 一般采用缩写，例如 "fmt" 和 "net/http"。对于你自己的包，你要选择一个 base path，来避免和未来的标准库和其他的包产生冲突。

## 包名

Go 源码文件第一行比如是包名

```go
package name
```

按照约定，包名与导入路径的最后一个元素一致。

为了方便，Go 将 import path 的最后一个元素设置为包名，例如你的包被引入为“crypto/rot13”，则包名就是rot13。

## Remote packages

import path 也可以是从远程仓库获取的路径。go 工具会根据这个地址自动的从远程仓库抓取这些包。

如果包不存在，则会用 go get 会自动执行，并将其放到指定的工作空间中（即设置的 GOPATH）。

## 导出名

在 Go 中， 如果一个名字以大写字母开头，那么它就是导出的。

例如，Pizza 就是个已导出名，Pi 也同样，它导出自 math 包。

在导入一个包时，你只能引用其中已导出的名字。任何“未导出”的名字在该包外均无法访问。

## 函数

Go 语言中函数的类型在变量名之后。

当连续两个或多个函数的已命名形参类型相同时，除最后一个类型以外，其它都可以省略。

例如：

```Go
X int, y int
// 可以缩写为
x, y int
```

Go 语言中，函数可以返回任意数量的返回值，下列的 swap 函数返回了两个字符串。

```Go
package main

import "fmt"

func swap(x, y string) (string, string) {
    return y, x
}
```

Go 的返回值可以被命名，他们是定义在函数顶部的变量，也就是第二个括号就是返回值的信息，没有参数的 return 返回已命名的返回值，也就是直接返回。例如：

```Go
package main

import "fmt"

func split(sum int) (x, y int) {
    x = sum * 4 / 9
    y = sum - x
    return
}

func main() {
    fmt.Println(split(17))
}
```

## 变量

Go 语言中使用 **var** 来声明变量。

在函数中，可以使用 **:=** 在类型明确的地方代替 **var** 声明。

注意：函数外的每个语句都必须以关键字开始（例如：var func），因此 **:=** 方式不能再函数外使用。

### 基本类型

Go 的基本类型有

```Go
bool

string

int  int8  int16  int32  int64
uint uint8 uint16 uint32 uint64 uintptr

byte // uint8 的别名

rune // int32 的别名
    // 表示一个 Unicode 码点

float32 float64

complex64 complex128
```

**int**, **uint** 和 **uintptr** 在 32 位系统上通常为 32 位宽，在 64 位系统上则为 64 位宽。

### 类型转换

Go 在不同类型的项之间赋值时需要显式转换。

```Go
var i int = 42
var f float64 = float64(i)
var u uint = uint(f)
```

在声明一个变量而不指定其类型时，变量的类型由右值推到而出。

### 常量

Go 语言中，使用 **const** 来声明常量。

常量可以是字符、字符串、布尔值或数值。

常量不能用 := 语法声明。

数值常量是高精度的 值。

一个未指定类型的常量由上下文来决定其类型。
