---
title: es6 学习笔记
date: 2019-07-08 14:46:53
tags: 
    - es6
    - 学习笔记
categories: 学习笔记
---
## let 和 const 

es6 中新增了 let 和 const 命令，用来声明变量。let 声明的变量，只在 let 命令所在的代码块内有效。

let 必须先声明，后使用。

ES6 明确规定，如果区块中存在let和const命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。被称作“暂时性死区” (temporal dead zone，简称 TDZ)

const 用来声明一个只读的常量，声明后，常量的值就不能改变。

## 变量的结构赋值

ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。

```javascript
let [a, b, c] = [1, 2, 3];
```

这种写法也可以称作“模式匹配”，只要等号两边的模式相同，左边的变量就会被赋予对应的值。

如果解析不成功，值为 undefined

```javascript
let [foo] = [];
let [bar, foo] = [1];
```

不完全解构，即等号左边的模式，只匹配一部分等号右边的数组，这种情况下依旧可以解构成功。

```javascript
let [x, y] = [1, 2, 3];
x // 1
y // 2

let [a, [b], d] = [1, [2, 3], 4];
a // 1
b // 2
d // 4
```

如果右边不是数组（或者说不是可遍历的结构），会报错。

... op 为剩余运算符

```javascript
let [a, ...b] = [1, 2, 3];
//a = 1
//b = [2, 3]
```

## 字符串的拓展

### 模板字符串

```javascript
$('#result').append(`
  There are <b>${basket.count}</b> items
   in your basket, <em>${basket.onSale}</em>
  are on sale!
`);
```

模板字符串（template string）是增强版的字符串，用反引号（`）标识。它可以当作普通字符串使用，也可以用来定义多行字符串，或者在字符串中嵌入变量。

## 函数的拓展

可以给函数加默认值

```javascript
function log(x, y = 'World') {
  console.log(x, y);
}

log('Hello') // Hello World
log('Hello', 'China') // Hello China
log('Hello', '') // Hello
```

参数的默认值可以和结构赋值结合使用。

### 作用域

一旦设置参数的默认值，函数进行声明结构初始化时，参数会形成一个单独的作用域，等初始化完成后，作用域就会消失。

```javascript
var x = 1;

function f(x, y = x) {
  console.log(y);
}

f(2) // 2

/**
* 调用 f 时，单独形成一个作用域，此时的 y = 参数 x，而不是全局变量 x
**/

let x = 1;

function f(y = x) {
  let x = 2;
  console.log(y);
}

f() // 1

/**
* 调用 f 时，形成作用域，因为在这个作用域没有 x，所以使用了全局变量 x 的值，后续局部变量影响不到全部变量的值
* 所以是全局变量的值。
**/
```
